@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --brand-primary: #003DA5;
    --brand-secondary: #111827;
    --brand-accent: #60A5FA;
    --bg: #0B0F13;
    --fg: #F3F4F6;
    --muted: #9CA3AF;
    --border: #1F2937;
    --radius: 0.375rem; /* Squared for rigid aesthetic */
    --shadow-sm: 0 1px 3px rgba(0,0,0,.1);
    --shadow-md: 0 2px 8px rgba(0,0,0,.15);
    --shadow-lg: 0 4px 16px rgba(0,0,0,.2);
    --shadow-xl: 0 8px 32px rgba(0,0,0,.3);
  }

  * {
    border-color: var(--border);
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    background-color: var(--bg);
    color: var(--fg);
  }

  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

@layer components {
  /* Skip link for accessibility */
  .skip-link {
    @apply absolute -top-full left-0 bg-brand-primary text-white px-4 py-2 z-50;
    @apply focus:top-0 transition-all;
  }

  /* Navigation links */
  .nav-link {
    @apply text-brand-fg hover:text-brand-accent transition-all duration-200;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-accent rounded px-2 py-1;
    @apply relative;
  }

  .nav-link::after {
    content: '';
    @apply absolute bottom-0 left-0 w-0 h-0.5 bg-brand-accent-bright transition-all duration-300;
  }

  .nav-link:hover::after {
    @apply w-full;
  }

  /* Header scroll effect */
  .header-scrolled {
    @apply shadow-lg shadow-black/20;
  }

  /* Mobile menu animation - improved for better UX */
  #mobile-menu {
    @apply transition-all duration-300;
    max-height: 0;
    overflow: hidden;
    opacity: 0;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  #mobile-menu.show {
    max-height: 600px;
    opacity: 1;
  }

  /* Ensure links are visually distinct when focused for accessibility */
  #mobile-menu a:focus-visible {
    @apply outline-none ring-2 ring-brand-accent ring-offset-2 ring-offset-brand-secondary;
  }

  /* Buttons - Squared, decisive style */
  .btn-primary {
    @apply bg-gradient-to-r from-brand-primary to-brand-accent-bright text-white font-bold;
    @apply px-6 py-3 rounded transition-all duration-200;
    @apply hover:shadow-md border-2 border-transparent hover:border-brand-accent;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-accent focus-visible:ring-offset-2 focus-visible:ring-offset-brand-bg;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-secondary {
    @apply bg-white hover:bg-gray-100 text-brand-secondary font-bold;
    @apply px-6 py-3 rounded transition-all duration-200;
    @apply hover:shadow-md border-2 border-border hover:border-brand-accent;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-accent focus-visible:ring-offset-2 focus-visible:ring-offset-brand-bg;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-green {
    @apply bg-brand-green hover:bg-brand-green/90 text-white font-bold;
    @apply px-6 py-3 rounded transition-all duration-200;
    @apply hover:shadow-md border-2 border-transparent hover:border-brand-green;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-green focus-visible:ring-offset-2 focus-visible:ring-offset-brand-bg;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Form elements */
  .input {
    @apply w-full bg-brand-secondary border border-border rounded-lg px-4 py-2.5;
    @apply text-brand-fg placeholder:text-muted;
    @apply focus:outline-none focus:ring-2 focus:ring-brand-accent focus:border-transparent;
    @apply transition-all;
  }

  /* Cards - Squared, decisive style */
  .card {
    @apply bg-brand-secondary border-2 border-border rounded p-6;
    @apply transition-all duration-200 ease-in-out;
  }

  .card:hover {
    @apply shadow-md border-brand-accent/50;
    transform: translateY(-2px);
  }

  /* Prose (for blog content) */
  .prose {
    @apply text-brand-fg;
  }

  .prose h1,
  .prose h2,
  .prose h3,
  .prose h4,
  .prose h5,
  .prose h6 {
    @apply font-heading font-bold text-brand-fg;
  }

  .prose a {
    @apply text-brand-accent hover:underline;
  }

  .prose strong {
    @apply text-brand-fg font-semibold;
  }

  .prose code {
    @apply bg-brand-secondary px-2 py-1 rounded text-sm;
  }

  /* Before/After Slider */
  .before-after-slider {
    @apply relative overflow-hidden rounded-lg;
    user-select: none;
  }

  .before-after-slider .before-image,
  .before-after-slider .after-image {
    @apply absolute inset-0 w-full h-full object-cover;
  }

  .before-after-slider .slider-handle {
    @apply absolute top-0 bottom-0 w-1 bg-white cursor-ew-resize;
    left: 50%;
    transform: translateX(-50%);
  }

  .before-after-slider .slider-handle::before {
    content: '';
    @apply absolute top-1/2 left-1/2 w-8 h-8 bg-white rounded-full;
    transform: translate(-50%, -50%);
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  }

  .before-after-slider .slider-handle::after {
    content: '‚ü∑';
    @apply absolute top-1/2 left-1/2 text-black font-bold text-sm;
    transform: translate(-50%, -50%);
  }

  /* Testimonials Carousel */
  .testimonials-carousel {
    @apply relative overflow-hidden;
  }

  .carousel-track {
    @apply flex transition-transform duration-500 ease-in-out;
  }

  .carousel-slide {
    @apply min-w-full;
  }

  /* Pricing Calculator */
  #pricing-calculator .price-display {
    @apply text-5xl font-heading font-bold text-brand-accent;
  }

  /* Mobile Sticky Bottom Bar - Optimized for modern devices with safe area */
  .mobile-sticky-bar {
    @apply fixed bottom-0 left-0 right-0 z-50;
    @apply bg-brand-secondary/95 backdrop-blur-md border-t-2 border-border;
    @apply px-4 shadow-xl;
    @apply md:hidden; /* Only show on mobile */
    /* Safe area padding for devices with home indicators */
    padding-bottom: max(12px, env(safe-area-inset-bottom));
    padding-top: 12px;
  }

  .mobile-sticky-bar .btn-group {
    @apply grid grid-cols-2 gap-3;
  }

  /* Ensure footer has space for the sticky bar on mobile */
  @media (max-width: 767px) {
    footer {
      margin-bottom: calc(72px + env(safe-area-inset-bottom, 0px));
    }
  }

  /* Floating CTA Button */
  .floating-cta {
    @apply fixed bottom-6 right-6 z-40;
    @apply hidden md:inline-flex items-center justify-center gap-3;
    @apply bg-gradient-to-r from-brand-primary to-brand-accent text-white font-bold px-8 py-4 rounded;
    @apply shadow-2xl hover:shadow-[0_20px_60px_rgba(96,165,250,0.4)];
    @apply transition-all duration-300 ease-out;
    @apply focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-brand-accent/50;
    opacity: 0;
    transform: scale(0.9);
    pointer-events: none;
  }

  .floating-cta.visible {
    opacity: 1;
    transform: scale(1);
    pointer-events: auto;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Fade-in animation utilities */
  .fade-in {
    animation: fadeIn 0.6s ease-out forwards;
    opacity: 0;
  }

  .slide-up {
    animation: slideUp 0.6s ease-out forwards;
    opacity: 0;
  }

  .scale-in {
    animation: scaleIn 0.5s ease-out forwards;
    opacity: 0;
  }

  /* Staggered animation delays */
  .delay-100 { animation-delay: 100ms; }
  .delay-200 { animation-delay: 200ms; }
  .delay-300 { animation-delay: 300ms; }
  .delay-400 { animation-delay: 400ms; }
  .delay-500 { animation-delay: 500ms; }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes countUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-20px);
  }
}

@keyframes pulse-glow {
  0%, 100% {
    box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
  }
  50% {
    box-shadow: 0 0 40px rgba(96, 165, 250, 0.6);
  }
}
