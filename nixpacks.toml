[phases.setup]
nixPkgs = ["nodejs", "go"]

[phases.install]
cmds = [
  "npm install",
  "go mod download",
  "go install github.com/a-h/templ/cmd/templ@latest"
]

[phases.build]
cmds = [
  "templ generate",
  "npx tailwindcss -i ./web/static/css/input.css -o ./web/static/css/output.css --minify",
  "go build -o bin/server ./cmd/server"
]

[start]
cmd = "./bin/server"
